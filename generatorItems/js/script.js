document.addEventListener("DOMContentLoaded", () => {
    // База данных готовых грамотных безделушек
    const trinketDatabase = [
        // Украшения и драгоценности
        {
            name: "Серебряное зеркальце",
            effect: "Показывает отражение на 5 минут моложе"
        },
        {
            name: "Обсидиановое кольцо",
            effect: "Всегда прохладное на ощупь"
        },
        {
            name: "Аметистовый кулон",
            effect: "Слегка пульсирует теплом при лунном свете"
        },
        {
            name: "Изумрудная брошь",
            effect: "Меняет оттенок в зависимости от настроения владельца"
        },
        {
            name: "Резной костяной гребень",
            effect: "Волосы, расчесанные им, никогда не путаются"
        },
        {
            name: "Рубиновая заколка",
            effect: "Собирает утреннюю росу в жемчужину"
        },
        {
            name: "Янтарный амулет",
            effect: "Хранит внутри застывшую каплю дождя"
        },
        {
            name: "Сапфировая подвеска",
            effect: "Светится мягким синим светом в полной темноте"
        },
        {
            name: "Перламутровый медальон",
            effect: "Играет радужными переливами при движении"
        },
        {
            name: "Топазовая булавка",
            effect: "Никогда не теряется и всегда возвращается к владельцу"
        },
        
        // Предметы обихода
        {
            name: "Фарфоровая чашка",
            effect: "Сохраняет чай горячим ровно час"
        },
        {
            name: "Дубовая ложка",
            effect: "Делает любую еду немного вкуснее"
        },
        {
            name: "Хрустальный кубок",
            effect: "Вода в нем всегда кажется чище и свежее"
        },
        {
            name: "Глиняный горшочек",
            effect: "Растения в нем растут на 20% быстрее"
        },
        {
            name: "Медный подсвечник",
            effect: "Свечи в нем горят в два раза дольше"
        },
        {
            name: "Оловянная кружка",
            effect: "Пиво в ней никогда не выдыхается"
        },
        {
            name: "Керамическая тарелка",
            effect: "Еда на ней не остывает"
        },
        {
            name: "Стеклянная бутылка",
            effect: "Хранит один секрет, сказанный в ее горлышко"
        },
        {
            name: "Деревянная миска",
            effect: "Всегда пахнет свежераспиленным деревом"
        },
        {
            name: "Железный котелок",
            effect: "Суп в нем никогда не пригорает"
        },
        
        // Аксессуары и одежда
        {
            name: "Шелковый платок",
            effect: "Никогда не мнется и всегда чистый"
        },
        {
            name: "Кожаный кошель",
            effect: "Всегда содержит одну лишнюю медную монету"
        },
        {
            name: "Вязаная перчатка",
            effect: "Вторая перчатка всегда находится в кармане"
        },
        {
            name: "Бархатный мешочек",
            effect: "Хранит до 5 мелких предметов без изменения веса"
        },
        {
            name: "Шерстяной шарф",
            effect: "Согревает в холод и охлаждает в жару"
        },
        {
            name: "Плетёный пояс",
            effect: "Всегда идеально подходит по размеру"
        },
        {
            name: "Вышитый носовой платок",
            effect: "Всегда сухой и чистый"
        },
        {
            name: "Замшевые перчатки",
            effect: "Руки в них никогда не потеют"
        },
        {
            name: "Льняная сумка",
            effect: "В ней всегда находится то, что ищешь"
        },
        {
            name: "Шелковая повязка на глаза",
            effect: "Видит сны наяву при надевании"
        },
        
        // Инструменты и письменные принадлежности
        {
            name: "Стальное перо",
            effect: "Пишет чернилами любого цвета"
        },
        {
            name: "Чернильница из оникса",
            effect: "Никогда не высыхает"
        },
        {
            name: "Бронзовые весы",
            effect: "Всегда показывают истинный вес"
        },
        {
            name: "Деревянная линейка",
            effect: "Помогает чертить идеально прямые линии"
        },
        {
            name: "Серебряный компас",
            effect: "Указывает на ближайший источник магии"
        },
        {
            name: "Хрустальная лупа",
            effect: "Увеличивает в ровно два раза"
        },
        {
            name: "Костяная игла",
            effect: "Никогда не ломается и не тупится"
        },
        {
            name: "Медная печать",
            effect: "Оставляет идеальный оттиск каждый раз"
        },
        {
            name: "Стеклянная призма",
            effect: "Создает маленькую радугу в солнечный день"
        },
        {
            name: "Железный ключ",
            effect: "Открывает любую простую замочную скважину"
        },
        
        // Музыкальные инструменты
        {
            name: "Деревянная свирель",
            effect: "Играет тихую мелодию при ветре"
        },
        {
            name: "Костяной свисток",
            effect: "Слышен только тому, кому предназначен"
        },
        {
            name: "Медные тарелочки",
            effect: "Звенят чисто и мелодично"
        },
        {
            name: "Барабан из кожи ящерицы",
            effect: "Звук его боя слышен за милю в тишине"
        },
        {
            name: "Серебряный колокольчик",
            effect: "Его звон успокаивает плачущих детей"
        },
        {
            name: "Глиняная окарина",
            effect: "Играет сама собой при лунном свете"
        },
        {
            name: "Деревянные трещотки",
            effect: "Отпугивают мелких грызунов"
        },
        {
            name: "Бронзовые кастаньеты",
            effect: "Заставляют ноги пританцовывать"
        },
        {
            name: "Железный гонг",
            effect: "Его звук очищает воздух от плохих запахов"
        },
        {
            name: "Тростниковая дудочка",
            effect: "Привлекает лесных птиц"
        },
        
        // Игрушки и безделушки
        {
            name: "Резная деревянная лошадка",
            effect: "Кажется, что скачет, если на нее долго смотреть"
        },
        {
            name: "Фарфоровая кукла",
            effect: "Моргает, когда на нее никто не смотрит"
        },
        {
            name: "Стеклянный волчок",
            effect: "Вращается вдвое дольше обычного"
        },
        {
            name: "Костяные игральные кости",
            effect: "Всегда выпадают на ту грань, которую видели последней"
        },
        {
            name: "Расписной волчок",
            effect: "При вращении показывает движущиеся картинки"
        },
        {
            name: "Деревянный йо-йо",
            effect: "Никогда не запутывается"
        },
        {
            name: "Кожаный мячик",
            effect: "Всегда отскакивает прямо в руки"
        },
        {
            name: "Оловянный солдатик",
            effect: "Меняет позу каждую ночь"
        },
        {
            name: "Картонные карты",
            effect: "Никогда не мнутся и не рвутся"
        },
        {
            name: "Бумажный змей",
            effect: "Взлетает при малейшем ветерке"
        },
        
        // Магические предметы
        {
            name: "Кристалл сновидений",
            effect: "Хранит один яркий сон владельца"
        },
        {
            name: "Карманные песочные часы",
            effect: "Песок течет вверх, когда их переворачивают"
        },
        {
            name: "Зеркальный осколок",
            effect: "Показывает отражение с разницей в 5 секунд"
        },
        {
            name: "Каменный рунический камень",
            effect: "Руны на нем меняются каждое полнолуние"
        },
        {
            name: "Серебряная монета с дыркой",
            effect: "Всегда падает орлом вверх"
        },
        {
            name: "Хрустальная сфера",
            effect: "Внутри всегда плавает одно облачко"
        },
        {
            name: "Зачарованный мелок",
            effect: "Рисует только белым цветом, но очень ярко"
        },
        {
            name: "Лунный камень",
            effect: "Светится в полнолуние"
        },
        {
            name: "Солнечный призм",
            effect: "Собирает солнечный свет и хранит его до ночи"
        },
        {
            name: "Звездная пыль в пузырьке",
            effect: "Мерцает при встряхивании"
        },
        
        // Необычные предметы
        {
            name: "Вечный факел",
            effect: "Горит, но не сжигается и не нагревается"
        },
        {
            name: "Неиссякаемая чернильница",
            effect: "В ней всегда есть чернила, но только черные"
        },
        {
            name: "Самозаводящиеся часы",
            effect: "Всегда показывают точное время"
        },
        {
            name: "Самонагревающаяся кружка",
            effect: "Напиток в ней всегда идеальной температуры"
        },
        {
            name: "Самоочищающаяся кисть",
            effect: "Не требует воды для промывки"
        },
        {
            name: "Самонапрявляющаяся игла",
            effect: "Всегда указывает на северный полюс"
        },
        {
            name: "Самопишущее перо",
            effect: "Записывает один сон каждую ночь"
        },
        {
            name: "Самозвучащая струна",
            effect: "Издает тихий звук при прикосновении"
        },
        {
            name: "Самораскрашивающаяся картина",
            effect: "Меняет цвета в зависимости от времени суток"
        },
        {
            name: "Самособирающаяся головоломка",
            effect: "Собирается за ровно одну минуту"
        }
    ];

    // Вспомогательные функции
    const random = (arr) => arr[Math.floor(Math.random() * arr.length)];
    
    // Элементы DOM
    const generateButton = document.getElementById('generate-items');
    const itemNameElement = document.getElementById('item-name');
    const itemEffectElement = document.getElementById('item-effect');
    const itemDisplay = document.querySelector('.item-display');

    // Анимация появления
    function animateItemAppear() {
        itemDisplay.style.opacity = '0';
        itemDisplay.style.transform = 'scale(0.9) translateY(20px)';
        
        setTimeout(() => {
            // Выбираем случайную безделушку
            const trinket = random(trinketDatabase);
            
            // Устанавливаем значения
            itemNameElement.textContent = trinket.name;
            itemEffectElement.textContent = trinket.effect;
            
            // Запускаем анимацию появления
            itemDisplay.style.opacity = '1';
            itemDisplay.style.transform = 'scale(1) translateY(0)';
            
            // Добавляем класс для анимации текста
            itemEffectElement.classList.add('text-glow');
            setTimeout(() => {
                itemEffectElement.classList.remove('text-glow');
            }, 1000);
        }, 300);
    }

    // Вешаем обработчик на кнопку
    generateButton.addEventListener('click', animateItemAppear);

    // Генерируем первую безделушку при загрузке
    function generateInitialTrinket() {
        const trinket = random(trinketDatabase);
        itemNameElement.textContent = trinket.name;
        itemEffectElement.textContent = trinket.effect;
        itemDisplay.style.opacity = '1';
    }

    // Генерируем первый предмет при загрузке
    window.addEventListener('load', generateInitialTrinket);

    // Добавляем эффект при наведении на кнопку
    generateButton.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-3px) scale(1.05)';
    });
    
    generateButton.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0) scale(1)';
    });

});